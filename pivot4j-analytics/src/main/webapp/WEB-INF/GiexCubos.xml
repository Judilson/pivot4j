<?xml version="1.0"?>
<Schema name="Divida">

    <Cube name ="Processos" cache="false">
        <View alias="TB_GESTAO_PROCESSUAL">
    <Cube name ="Processos">
        <View alias="tb_gestao_processual">
            <SQL dialect="generic">
                <![CDATA[ select *from tb_gestao_processual where cred_id_credor = %CREDOR%]]> 
            </SQL>
        </View>
    
        <Dimension name="Tipo processo" foreignKey="pctp_sg_processo">
            <Hierarchy hasAll="true" primaryKeyTable="tb_processo_tipos" primaryKey="pctp_sg_processo"  allMemberName="Todos tipos">
                <Join leftKey="pctp_sg_processo" rightKey="pctp_sg_processo">
                    <Table name="tb_processo_tipos"/>
                    <View alias="tb_gestao_processual">
                        <SQL dialect="generic">
                <![CDATA[ select *from tb_gestao_processual where cred_id_credor = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Tipo processo" table="tb_processo_tipos" column="pctp_nm_processo" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Situação" foreignKey="sipr_id_situacao">
            <Hierarchy hasAll="true" primaryKeyTable="tb_situacoes_processo" primaryKey="sipr_id_situacao"  allMemberName="Todas Situações">
                <Join leftKey="sipr_id_situacao" rightKey="sipr_id_situacao">
                    <Table name="tb_situacoes_processo"/>
                    <View alias="tb_gestao_processual">
                        <SQL dialect="generic">
                <![CDATA[ select *from tb_gestao_processual where cred_id_credor = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Situação" table="tb_situacoes_processo" column="sipr_nm_situacao" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Responsável">
            <Hierarchy hasAll="true" primaryKey="assi_id_assinatura" allMemberName="Todos responsáveis">
                <View alias="tb_gestao_processual">
                    <SQL dialect="generic">
                <![CDATA[ select *from tb_gestao_processual where cred_id_credor = %CREDOR%]]> 
                    </SQL>
                </View>
                <Level name="Responsável" column="assi_nm_responsavel" type="String" uniqueMembers="true"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Digital?" foreignKey="proc_st_digital">
            <Hierarchy hasAll="true" primaryKeyTable="tb_sn" primaryKey="sn_id" allMemberName="Digitais?">
                <Join leftKey="sn_id" rightKey="proc_st_digital">
                    <Table name="tb_sn"/>
                    <View alias="tb_gestao_processual">
                        <SQL dialect="generic">
                <![CDATA[ select *from tb_gestao_processual where cred_id_credor = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Digital?" table="tb_sn" column="sn_nm" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Measure name="Valor atualizado" column="proc_vl_atualizado" aggregator="sum" formatString="R$ ###,###,###,##0.00"/>
        <Measure name="Valor de causa" column="proc_vl_causa" aggregator="sum" formatString="R$ ###,###,###,##0.00"/>
    </Cube>
    
    <Cube name="Divida" cache="false">
        <View alias="TB_ANALISE_DIVIDAS_DIM01">
            <SQL dialect="generic">
                <![CDATA[ select *from tb_analise_dividas_dim01 where cred_id_credor = %CREDOR%]]> 
            </SQL>
        </View>

        <Dimension name="Situação" foreignKey="situ_id_situacao">
            <Hierarchy hasAll="true" primaryKeyTable="tb_debito_situacoes" primaryKey="situ_id_situacao"  allMemberName="Todas situações">
                <Join leftKey="situ_id_situacao" rightKey="situ_id_situacao">
                    <Table name="tb_debito_situacoes"/>
                    <View alias="tb_analise_dividas_dim01">
                        <SQL dialect="generic">
                <![CDATA[ select *from tb_analise_dividas_dim01 where cred_id_credor = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Situação" table="tb_debito_situacoes" column="situ_nm_situacao" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
     
        <Dimension name="Fase" foreignKey="fase_sg_fase">
            <Hierarchy hasAll="true" primaryKeyTable="tb_debito_fases" primaryKey="fase_sg_fase" allMemberName="Todas fases">
                <Join leftKey="fase_sg_fase" rightKey="fase_sg_fase">
                    <Table name="tb_debito_fases"/>
                    <View alias="tb_analise_dividas_dim01">
                        <SQL dialect="generic">
                <![CDATA[ select *from tb_analise_dividas_dim01 where cred_id_credor = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Fase" table="tb_debito_fases" column="fase_ds_fase" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>

        <Dimension name="Origem">
            <Hierarchy hasAll="true" allMemberName="Todas origens">
                <Level name="Origem" column="caor_sg_origem" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Bairro">
            <Hierarchy hasAll="true" allMemberName="Todos bairros">
                <Level name="Bairro" column="cada_ds_bairro" uniqueMembers="true" type="String"/>
                <Level name="Lançamento" column="lanc_nr_lancamento" uniqueMembers="true" type="Integer"/>
            </Hierarchy>
        </Dimension>

        <Dimension name="Exercício" foreignKey="exer_nr_lancamento">
            <Hierarchy hasAll="true" primaryKeyTable="tb_exercicios" primaryKey="exer_nr_ano" allMemberName="Todos exercícios">
                <Join leftKey="exer_nr_ano" rightKey="exer_nr_lancamento">
                    <Table name="tb_exercicios"/>
                    <View alias="tb_analise_dividas_dim01">
                        <SQL dialect="generic">
                <![CDATA[ select *from tb_analise_dividas_dim01 where cred_id_credor = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Exercício" table="tb_exercicios" column="exer_nr_ano" uniqueMembers="true" type="Integer"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Algum outro pago" foreignKey="possui_lancamentos_pagos">
            <Hierarchy hasAll="true" primaryKeyTable="tb_sn" primaryKey="sn_id" allMemberName="Todos">
                <Join leftKey="sn_id" rightKey="possui_lancamentos_pagos">
                    <Table name="tb_sn"/>
                    <View alias="tb_analise_dividas_dim01">
                        <SQL dialect="generic">
                <![CDATA[ select *from tb_analise_dividas_dim01 where cred_id_credor = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Prescrito" foreignKey="laid_st_prescrito">
            <Hierarchy hasAll="true" primaryKeyTable="tb_sn" primaryKey="sn_id" allMemberName="Prescritos">
                <Join leftKey="sn_id" rightKey="laid_st_prescrito">
                    <Table name="tb_sn"/>
                    <View alias="tb_analise_dividas_dim01">
                        <SQL dialect="generic">
                <![CDATA[ select *from tb_analise_dividas_dim01 where cred_id_credor = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Prescrito" table="tb_sn" column="sn_nm" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Measure name="Valor atualizado" column="lava_vl_atualizado" aggregator="sum" formatString="R$ ###,###,###,##0.00"/>
    </Cube>
    
</Schema>
                <Level name="Cadastro algum outro pago" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>

        <Dimension name="Pessoa algum outro pago" foreignKey="PESSOA_POSSUI_LANCS_PAGOS">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Todos">
                <Join leftKey="SN_ID" rightKey="PESSOA_POSSUI_LANCS_PAGOS">
                    <Table name="TB_SN"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Pessoa algum outro pago" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>        

        <Dimension name="Prescrito" foreignKey="LAID_ST_PRESCRITO">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Prescritos">
                <Join leftKey="SN_ID" rightKey="LAID_ST_PRESCRITO">
                    <Table name="TB_SN"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Prescrito" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
